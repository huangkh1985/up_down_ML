# å®Œæ•´è¿è¡ŒæŒ‡å—

## ðŸ“‹ ç³»ç»Ÿæ¦‚è¿°

æœ¬ç³»ç»Ÿæ˜¯ä¸€ä¸ª**å¤šæ—¶é—´çª—å£è‚¡ç¥¨é¢„æµ‹ç³»ç»Ÿ**ï¼Œé€šè¿‡åŒæ—¶é¢„æµ‹1å¤©ã€3å¤©ã€5å¤©ã€10å¤©çš„è‚¡ç¥¨èµ°åŠ¿æ¥å®žçŽ°äº’ç›¸éªŒè¯ï¼Œæé«˜é¢„æµ‹å‡†ç¡®æ€§ã€‚

## ðŸŽ¯ è¿è¡Œæµç¨‹å›¾

```
æ­¥éª¤1: çŽ¯å¢ƒå‡†å¤‡
    â†“
æ­¥éª¤2: ä¸‹è½½è‚¡ç¥¨æ•°æ®
    â†“
æ­¥éª¤3: ç‰¹å¾å·¥ç¨‹å¤„ç†
    â†“
æ­¥éª¤4: è®­ç»ƒMA20é¢„æµ‹æ¨¡åž‹
    â†“
æ­¥éª¤5: è®­ç»ƒå¤šæ—¶é—´çª—å£æ¨¡åž‹
    â†“
æ­¥éª¤6: å®žç›˜é¢„æµ‹
```

---

## æ­¥éª¤1: çŽ¯å¢ƒå‡†å¤‡

### 1.1 æ£€æŸ¥Pythonç‰ˆæœ¬

```bash
python --version
```

**è¦æ±‚ï¼š** Python 3.8 æˆ–æ›´é«˜ç‰ˆæœ¬

### 1.2 å®‰è£…ä¾èµ–åŒ…

```bash
# åŸºç¡€ç§‘å­¦è®¡ç®—åŒ…
pip install pandas numpy scipy

# æœºå™¨å­¦ä¹ åŒ…
pip install scikit-learn xgboost lightgbm

# ä¸å¹³è¡¡æ•°æ®å¤„ç†
pip install imbalanced-learn

# æ—¶é—´åºåˆ—ç‰¹å¾æå–
pip install tsfresh

# æ•°æ®å¯è§†åŒ–
pip install matplotlib seaborn

# è‚¡ç¥¨æ•°æ®èŽ·å–
pip install efinance akshare

# å°æ³¢å˜æ¢ï¼ˆå¯é€‰ï¼‰
pip install pywt
```

**æˆ–è€…ä¸€æ¬¡æ€§å®‰è£…ï¼š**

```bash
pip install pandas numpy scipy scikit-learn xgboost lightgbm imbalanced-learn tsfresh matplotlib seaborn efinance akshare pywt
```

### 1.3 éªŒè¯å®‰è£…

```bash
python -c "import pandas, numpy, sklearn, xgboost, lightgbm, imblearn, tsfresh, matplotlib, efinance; print('æ‰€æœ‰åŒ…å®‰è£…æˆåŠŸ')"
```

---

## æ­¥éª¤2: ä¸‹è½½è‚¡ç¥¨æ•°æ®

### 2.1 è¿è¡Œæ•°æ®ä¸‹è½½è„šæœ¬

```bash
python stock_data_downloader.py
```

**åŠŸèƒ½ï¼š**
- ä»Žé¾™è™Žæ¦œèŽ·å–æ´»è·ƒè‚¡ç¥¨ä»£ç 
- è‡ªåŠ¨è¿‡æ»¤STè‚¡å’Œæ¬¡æ–°è‚¡
- ä¸‹è½½Kçº¿æ•°æ®å’Œèµ„é‡‘æµæ•°æ®
- è®¡ç®—æŠ€æœ¯æŒ‡æ ‡
- ä¿å­˜åˆ° `data/` ç›®å½•

**é¢„æœŸè¾“å‡ºï¼š**
```
================================================================================
è‚¡ç¥¨æ•°æ®ä¸‹è½½å·¥å…·
================================================================================
å¼€å§‹æ—¶é—´: 2025-10-05 XX:XX:XX

æ­¥éª¤1: èŽ·å–é¾™è™Žæ¦œæ´»è·ƒè‚¡ç¥¨
------------------------------------------------------------
æ­£åœ¨èŽ·å–é¾™è™Žæ¦œæ•°æ®...
èŽ·å–åˆ° XXX æ¡é¾™è™Žæ¦œè®°å½•

å¼€å§‹è¿‡æ»¤è‚¡ç¥¨...
  åŽŸå§‹è‚¡ç¥¨æ•°é‡: XX
  æŽ’é™¤STè‚¡: True
  æŽ’é™¤æ¬¡æ–°è‚¡: True

è¿‡æ»¤ç»“æžœç»Ÿè®¡:
  é€šè¿‡è¿‡æ»¤: XX åª
  æŽ’é™¤STè‚¡: X åª
  æŽ’é™¤æ¬¡æ–°è‚¡: X åª

æ­¥éª¤2: ä¸‹è½½è‚¡ç¥¨å¢žå¼ºæ•°æ®
------------------------------------------------------------
å¤„ç†è‚¡ç¥¨: 600519
  èŽ·å– 600519 çš„Kçº¿æ•°æ®...
  èŽ·å–åˆ° XXX æ¡Kçº¿è®°å½•
  èŽ·å– 600519 çš„èµ„é‡‘æµæ•°æ®...
  è®¡ç®— 600519 çš„æŠ€æœ¯æŒ‡æ ‡...
  [OK] 600519 æ•°æ®å¤„ç†å®Œæˆï¼Œæ•°æ®è®°å½•: XXX æ¡

æ€»å…±æˆåŠŸå¤„ç† XX åªè‚¡ç¥¨çš„æ•°æ®
å·²ä¿å­˜åˆ°: data/all_stock_data.pkl
```

**ç”Ÿæˆæ–‡ä»¶ï¼š**
- `data/all_stock_data.pkl` - æ‰€æœ‰è‚¡ç¥¨æ•°æ®ï¼ˆä¸»æ–‡ä»¶ï¼‰
- `data/stock_XXXXXX_data.csv` - å•ä¸ªè‚¡ç¥¨æ•°æ®ï¼ˆå¯é€‰ï¼‰
- `data/stock_list.csv` - è‚¡ç¥¨åˆ—è¡¨

**å¸¸è§é—®é¢˜ï¼š**

**Q: å¦‚æžœä¸‹è½½å¤±è´¥æ€Žä¹ˆåŠžï¼Ÿ**
```bash
# æ£€æŸ¥ç½‘ç»œè¿žæŽ¥
ping baidu.com

# é‡è¯•ä¸‹è½½
python stock_data_downloader.py
```

**Q: å¦‚ä½•è°ƒæ•´è‚¡ç¥¨æ•°é‡ï¼Ÿ**

ç¼–è¾‘ `stock_data_downloader.py`ï¼Œä¿®æ”¹ï¼š
```python
max_stocks = 30  # æ”¹ä¸ºæƒ³è¦çš„æ•°é‡
min_frequency=2   # é™ä½Žé¢‘çŽ‡è¦æ±‚èŽ·å–æ›´å¤šè‚¡ç¥¨
```

---

## æ­¥éª¤3: ç‰¹å¾å·¥ç¨‹å¤„ç†

### 3.1 è¿è¡Œç‰¹å¾å·¥ç¨‹è„šæœ¬

```bash
python stock_feature_engineering.py
```

**åŠŸèƒ½ï¼š**
- å°†è‚¡ç¥¨æ•°æ®è½¬æ¢ä¸ºTSFreshæ ¼å¼
- æå–æ—¶é—´åºåˆ—ç‰¹å¾
- ç‰¹å¾é€‰æ‹©å’Œç­›é€‰
- ä¿å­˜å¤„ç†åŽçš„ç‰¹å¾

**é¢„æœŸè¾“å‡ºï¼š**
```
================================================================================
è‚¡ç¥¨ç‰¹å¾å·¥ç¨‹å¤„ç†
================================================================================
å¼€å§‹æ—¶é—´: 2025-10-05 XX:XX:XX

æ­¥éª¤1: åŠ è½½è‚¡ç¥¨æ•°æ®
------------------------------------------------------------
æˆåŠŸåŠ è½½ XX åªè‚¡ç¥¨çš„æ•°æ®

æ­¥éª¤2: è½¬æ¢ä¸ºTSFreshæ ¼å¼
------------------------------------------------------------
çª—å£å¤§å°: 20å¤©
é¢„æµ‹æœŸé™: 5å¤©
ç”Ÿæˆçš„ç‰¹å¾æ•°æ®å½¢çŠ¶: (XXXX, X)
ç”Ÿæˆçš„ç›®æ ‡æ•°æ®å½¢çŠ¶: (XXXX, 2)

æ­¥éª¤3: ç‰¹å¾æå–å’Œé€‰æ‹©
------------------------------------------------------------
å¼€å§‹æå–å¢žå¼ºTSFreshç‰¹å¾...
ä½¿ç”¨ç²¾ç®€ç‰¹å¾é›†ï¼ˆé€Ÿåº¦å¿«ï¼ŒæŽ¨èï¼‰
ç³»ç»ŸCPUæ ¸å¿ƒæ•°: X
ä½¿ç”¨å¤šçº¿ç¨‹æ¨¡å¼ï¼Œæœ€ä¼˜çº¿ç¨‹æ•°: X

å¼€å§‹å¹¶è¡Œæå– 9 ç§ç‰¹å¾ç±»åž‹...
[OK] Close ç‰¹å¾æå–å®Œæˆï¼Œç‰¹å¾æ•°: XXX
[OK] Volume ç‰¹å¾æå–å®Œæˆï¼Œç‰¹å¾æ•°: XXX
...

å¤šçº¿ç¨‹ç‰¹å¾æå–å®Œæˆï¼Œæ€»è€—æ—¶: XX.XXç§’
æå–çš„åŽŸå§‹ç‰¹å¾æ•°é‡: XXXX

ðŸš€ V2.4 ç²¾ç¡®çŽ‡æå‡ - æ™ºèƒ½ç‰¹å¾é€‰æ‹©
ç¬¬ä¸€é˜¶æ®µ: ç»Ÿè®¡ç­›é€‰...
  ç»Ÿè®¡ç­›é€‰ä¿ç•™: XXX ä¸ªç‰¹å¾
ç¬¬äºŒé˜¶æ®µ: é‡è¦æ€§ç­›é€‰...
  é‡è¦æ€§ç­›é€‰ä¿ç•™: XXX ä¸ªç‰¹å¾ï¼ˆç´¯è®¡é‡è¦æ€§95%ï¼‰
[OK] æœ€ç»ˆç‰¹å¾æ•°é‡: XXX

æ­¥éª¤4: ä¿å­˜å¤„ç†åŽçš„ç‰¹å¾
------------------------------------------------------------
[OK] ç‰¹å¾æ•°æ®å·²ä¿å­˜åˆ°: data/
   - processed_features.csv (XXX ä¸ªç‰¹å¾)
   - processed_targets.csv (XXXX ä¸ªæ ·æœ¬)
   - processed_features.pkl (pickleæ ¼å¼ï¼ŒåŠ è½½æ›´å¿«)
```

**ç”Ÿæˆæ–‡ä»¶ï¼š**
- `data/processed_features.csv` - ç‰¹å¾æ•°æ®
- `data/processed_targets.csv` - ç›®æ ‡å˜é‡
- `data/processed_features.pkl` - æ‰“åŒ…æ•°æ®ï¼ˆæŽ¨èï¼‰

**è€—æ—¶ä¼°ç®—ï¼š**
- 10åªè‚¡ç¥¨ï¼šçº¦5-10åˆ†é’Ÿ
- 30åªè‚¡ç¥¨ï¼šçº¦15-30åˆ†é’Ÿ
- 50åªè‚¡ç¥¨ï¼šçº¦30-60åˆ†é’Ÿ

---

## æ­¥éª¤4: è®­ç»ƒMA20é¢„æµ‹æ¨¡åž‹

### 4.1 è¿è¡Œç»Ÿè®¡åˆ†æžè„šæœ¬

```bash
python stock_statistical_analysis.py
```

**åŠŸèƒ½ï¼š**
- è®­ç»ƒMA20çŠ¶æ€åˆ†ç±»æ¨¡åž‹
- è®­ç»ƒRandomForestã€XGBoostã€LightGBM
- è‡ªåŠ¨é˜ˆå€¼ä¼˜åŒ–
- æ¨¡åž‹è¯„ä¼°å’Œå¯è§†åŒ–
- ä¿å­˜è®­ç»ƒå¥½çš„æ¨¡åž‹

**é¢„æœŸè¾“å‡ºï¼š**
```
================================================================================
è‚¡ç¥¨ç»Ÿè®¡åˆ†æž
åŸºäºŽMA20çš„äºŒåˆ†ç±»é¢„æµ‹ï¼šä»·æ ¼>=MA20(å¼ºåŠ¿) vs ä»·æ ¼<MA20(å¼±åŠ¿)
================================================================================

æ­¥éª¤1: åŠ è½½å¤„ç†åŽçš„ç‰¹å¾
------------------------------------------------------------
ä»Žpickleæ–‡ä»¶åŠ è½½ï¼ˆæ›´å¿«ï¼‰...
[OK] åŠ è½½å®Œæˆ: XXX ä¸ªç‰¹å¾, XXXX ä¸ªæ ·æœ¬

æ­¥éª¤2: æ¸…ç†ç‰¹å¾åç§°
------------------------------------------------------------
[OK] ç‰¹å¾åç§°æ¸…ç†å®Œæˆ

æ­¥éª¤3: æ•°æ®åˆ†å‰²
------------------------------------------------------------
è®­ç»ƒé›†: XXXX æ ·æœ¬
æµ‹è¯•é›†: XXX æ ·æœ¬

æ­¥éª¤4: æ¨¡åž‹è®­ç»ƒ
------------------------------------------------------------
è®­ç»ƒäºŒåˆ†ç±»æ¨¡åž‹ï¼ˆV2.4.2ä¼˜åŒ–ç‰ˆï¼‰...
ðŸŽ¯ ä¼˜åŒ–ç›®æ ‡: æé«˜ç²¾ç¡®çŽ‡è‡³75%+ï¼Œç¡®ä¿å¬å›žçŽ‡å¹³è¡¡

è®­ç»ƒé›†ç±»åˆ«åˆ†å¸ƒ:
  0: ä»·æ ¼>=MA20(å¼ºåŠ¿) - XXXX æ ·æœ¬ (XX.XX%)
  1: ä»·æ ¼<MA20(å¼±åŠ¿) - XXXX æ ·æœ¬ (XX.XX%)

ä½¿ç”¨SMOTEè¿‡é‡‡æ ·å¹³è¡¡æ•°æ®é›†...
å¹³è¡¡åŽè®­ç»ƒé›†å¤§å°: XXXX

1ï¸âƒ£ è®­ç»ƒRandom Forestæ¨¡åž‹...
   [OK] Random Forestè®­ç»ƒå®Œæˆ

2ï¸âƒ£ è®­ç»ƒXGBoostæ¨¡åž‹...
   [OK] XGBoostè®­ç»ƒå®Œæˆ

3ï¸âƒ£ è®­ç»ƒLightGBMæ¨¡åž‹...
   [OK] LightGBMè®­ç»ƒå®Œæˆ

ðŸ“Š è¯„ä¼° 3 ä¸ªæ¨¡åž‹...
  RandomForest: å¹³å‡ç²¾ç¡®çŽ‡=XX.XX% (é˜ˆå€¼=0.XXX)
  XGBoost: å¹³å‡ç²¾ç¡®çŽ‡=XX.XX% (é˜ˆå€¼=0.XXX)
  LightGBM: å¹³å‡ç²¾ç¡®çŽ‡=XX.XX% (é˜ˆå€¼=0.XXX)

ðŸ† æœ€ä½³æ¨¡åž‹: RandomForest (ç²¾ç¡®çŽ‡=XX.XX%)

ðŸ“Š æ¨¡åž‹æ€§èƒ½è¯„ä¼°
æ•´ä½“å‡†ç¡®çŽ‡: 0.XXXX
ç²¾ç¡®çŽ‡å¯¹æ¯”:
  å¼ºåŠ¿ç±»åˆ«: XX.XX%
  å¼±åŠ¿ç±»åˆ«: XX.XX%
  å¹³å‡ç²¾ç¡®çŽ‡: XX.XX%

æ­¥éª¤8: ä¿å­˜æ¨¡åž‹ç”¨äºŽå®žç›˜é¢„æµ‹
------------------------------------------------------------
[OK] æœ€ä½³æ¨¡åž‹å·²ä¿å­˜åˆ°: models/trained_model.pkl
[OK] æ‰€æœ‰æ¨¡åž‹å·²ä¿å­˜åˆ°: models/all_trained_models.pkl (å…±3ä¸ªæ¨¡åž‹)
[OK] ç‰¹å¾åˆ—è¡¨å·²ä¿å­˜åˆ°: models/feature_list.pkl
[OK] æ¨¡åž‹ä¿¡æ¯å·²ä¿å­˜åˆ°: models/model_info.pkl
```

**ç”Ÿæˆæ–‡ä»¶ï¼š**
- `models/trained_model.pkl` - æœ€ä½³æ¨¡åž‹
- `models/all_trained_models.pkl` - æ‰€æœ‰æ¨¡åž‹
- `models/feature_list.pkl` - ç‰¹å¾åˆ—è¡¨
- `models/model_info.pkl` - æ¨¡åž‹ä¿¡æ¯
- `results/binary_classification_results.png` - ç»“æžœå¯è§†åŒ–

---

## æ­¥éª¤5: è®­ç»ƒå¤šæ—¶é—´çª—å£æ¨¡åž‹ â­

### 5.1 è¿è¡Œå¤šæ—¶é—´çª—å£é¢„æµ‹ç³»ç»Ÿ

```bash
python multi_horizon_prediction_system.py
```

**åŠŸèƒ½ï¼š**
- è®­ç»ƒ1å¤©ã€3å¤©ã€5å¤©ã€10å¤©çš„é¢„æµ‹æ¨¡åž‹
- è‡ªåŠ¨è¿›è¡Œæ¨¡åž‹è¯„ä¼°
- ç”Ÿæˆæ¼”ç¤ºé¢„æµ‹
- ä¿å­˜å¤šæ—¶é—´çª—å£æ¨¡åž‹

**é¢„æœŸè¾“å‡ºï¼š**
```
================================================================================
å¤šæ—¶é—´çª—å£é¢„æµ‹ç³»ç»Ÿ
åŒæ—¶ä½¿ç”¨1å¤©ã€3å¤©ã€5å¤©ã€10å¤©é¢„æµ‹è¿›è¡Œäº’ç›¸éªŒè¯
================================================================================
å¼€å§‹æ—¶é—´: 2025-10-05 XX:XX:XX

æ­¥éª¤1: åŠ è½½è‚¡ç¥¨æ•°æ®
------------------------------------------------------------
[OK] æˆåŠŸåŠ è½½ XX åªè‚¡ç¥¨

æ­¥éª¤2: åˆ›å»ºå¤šæ—¶é—´çª—å£é¢„æµ‹å™¨
------------------------------------------------------------

æ­¥éª¤3: è®­ç»ƒå¤šæ—¶é—´çª—å£æ¨¡åž‹
------------------------------------------------------------

================================================================================
è®­ç»ƒå¤šæ—¶é—´çª—å£æ¨¡åž‹
================================================================================

================================================================================
è®­ç»ƒ1å¤©é¢„æµ‹æ¨¡åž‹
================================================================================

å‡†å¤‡1å¤©é¢„æµ‹æ•°æ®...
  è¯†åˆ«å½¢æ€ç‰¹å¾...
  [OK] å½¢æ€ç‰¹å¾æå–å®Œæˆï¼Œå¢žåŠ  31 ä¸ªç‰¹å¾
  æ ·æœ¬æ•°: XXXX, ä¿¡å·æ¯”ä¾‹: X.XX%

  ä½¿ç”¨SMOTEå¹³è¡¡æ•°æ®
  è®­ç»ƒRandom Forest...

  æ€§èƒ½æŒ‡æ ‡:
    å‡†ç¡®çŽ‡: XX.XX%
    ç²¾ç¡®çŽ‡: XX.XX%
    å¬å›žçŽ‡: XX.XX%
  [OK] 1å¤©æ¨¡åž‹è®­ç»ƒå®Œæˆ

================================================================================
è®­ç»ƒ3å¤©é¢„æµ‹æ¨¡åž‹
================================================================================
ï¼ˆç±»ä¼¼è¾“å‡º...ï¼‰

================================================================================
è®­ç»ƒ5å¤©é¢„æµ‹æ¨¡åž‹
================================================================================
ï¼ˆç±»ä¼¼è¾“å‡º...ï¼‰

================================================================================
è®­ç»ƒ10å¤©é¢„æµ‹æ¨¡åž‹
================================================================================
ï¼ˆç±»ä¼¼è¾“å‡º...ï¼‰

================================================================================
[OK] æ‰€æœ‰æ¨¡åž‹è®­ç»ƒå®Œæˆï¼å…±4ä¸ªæ¨¡åž‹
================================================================================

æ­¥éª¤4: ä¿å­˜æ¨¡åž‹
------------------------------------------------------------
[OK] å¤šæ—¶é—´çª—å£æ¨¡åž‹å·²ä¿å­˜: models/multi_horizon_models.pkl

æ­¥éª¤5: æ¼”ç¤ºé¢„æµ‹
------------------------------------------------------------

================================================================================
é¢„æµ‹è‚¡ç¥¨: 002104
================================================================================

å¤šæ—¶é—´çª—å£é¢„æµ‹:
  [-] 1å¤©: æ— ä¿¡å· (æ¦‚çŽ‡:32.2%, ç½®ä¿¡:67.8%)
  [-] 3å¤©: æ— ä¿¡å· (æ¦‚çŽ‡:30.5%, ç½®ä¿¡:69.5%)
  [-] 5å¤©: æ— ä¿¡å· (æ¦‚çŽ‡:29.6%, ç½®ä¿¡:70.4%)
  [-] 10å¤©: æ— ä¿¡å· (æ¦‚çŽ‡:33.7%, ç½®ä¿¡:66.3%)

[-] ç»¼åˆå†³ç­–:
  çº§åˆ«: é¿å…
  è¡ŒåŠ¨: ä¸å»ºè®®äº¤æ˜“
  ä¸€è‡´æ€§: 0/4
  ç½®ä¿¡åº¦: 68.5%

[OK] å¯è§†åŒ–å›¾è¡¨å·²ä¿å­˜: results/multi_horizon_prediction_002104.png
```

**ç”Ÿæˆæ–‡ä»¶ï¼š**
- `models/multi_horizon_models.pkl` - å¤šæ—¶é—´çª—å£æ¨¡åž‹ï¼ˆæ ¸å¿ƒæ–‡ä»¶ï¼‰
- `results/multi_horizon_prediction_*.png` - é¢„æµ‹å¯è§†åŒ–å›¾è¡¨

**è€—æ—¶ä¼°ç®—ï¼š**
- çº¦10-20åˆ†é’Ÿï¼ˆå–å†³äºŽæ•°æ®é‡ï¼‰

---

## æ­¥éª¤6: å®žç›˜é¢„æµ‹

### 6.1 æ–¹æ³•Aï¼šå¤šæ—¶é—´çª—å£é¢„æµ‹ï¼ˆæŽ¨èï¼‰

```bash
python stock_multi_horizon_live_prediction.py
```

**äº¤äº’æµç¨‹ï¼š**
```
================================================================================
è‚¡ç¥¨å®žç›˜å¤šæ—¶é—´çª—å£ç»¼åˆé¢„æµ‹
ç»“åˆMA20çŠ¶æ€ + å½¢æ€ä¿¡å· + å¤šæ—¶é—´çª—å£éªŒè¯
================================================================================

åŠ è½½é¢„æµ‹æ¨¡åž‹...
[OK] æˆåŠŸåŠ è½½å¤šæ—¶é—´çª—å£æ¨¡åž‹
[OK] æˆåŠŸåŠ è½½MA20çŠ¶æ€é¢„æµ‹æ¨¡åž‹

è¯·è¾“å…¥è¦é¢„æµ‹çš„è‚¡ç¥¨ä»£ç ï¼ˆå¤šä¸ªç”¨é€—å·åˆ†éš”ï¼‰:
ç¤ºä¾‹: 600519,000001,002415
è‚¡ç¥¨ä»£ç ï¼ˆå›žè½¦ä½¿ç”¨é»˜è®¤ï¼‰: 600519

================================================================================
å¤šæ—¶é—´çª—å£ç»¼åˆé¢„æµ‹ - 600519
================================================================================

èŽ·å–600519å®žæ—¶æ•°æ®...
[OK] èŽ·å–åˆ° XXX æ¡è®°å½•

================================================================================
1ï¸âƒ£ MA20çŠ¶æ€å¤šæ—¶é—´çª—å£é¢„æµ‹ï¼ˆä»·æ ¼ç›¸å¯¹MA20ï¼‰
================================================================================

MA20çŠ¶æ€é¢„æµ‹ç»“æžœ:
  [+] 1å¤©åŽ: å¼ºåŠ¿(â‰¥MA20) (ç½®ä¿¡åº¦:75.3%)
  [+] 3å¤©åŽ: å¼ºåŠ¿(â‰¥MA20) (ç½®ä¿¡åº¦:72.1%)
  [*] 5å¤©åŽ: å¼±åŠ¿(<MA20) (ç½®ä¿¡åº¦:55.8%)
  [-] 10å¤©åŽ: å¼±åŠ¿(<MA20) (ç½®ä¿¡åº¦:68.2%)

================================================================================
2ï¸âƒ£ å½¢æ€ä¿¡å·å¤šæ—¶é—´çª—å£é¢„æµ‹ï¼ˆåè½¬/å›žè°ƒ/åå¼¹ï¼‰
================================================================================

å½¢æ€ä¿¡å·é¢„æµ‹ç»“æžœ:
  [+] 1å¤©åŽ: æœ‰ä¿¡å· (ç½®ä¿¡åº¦:82.5%)
  [+] 3å¤©åŽ: æœ‰ä¿¡å· (ç½®ä¿¡åº¦:78.3%)
  [*] 5å¤©åŽ: æ— ä¿¡å· (ç½®ä¿¡åº¦:58.1%)
  [-] 10å¤©åŽ: æ— ä¿¡å· (ç½®ä¿¡åº¦:71.5%)

================================================================================
3ï¸âƒ£ ç»¼åˆå†³ç­–
================================================================================

ç»¼åˆå†³ç­–ç»“æžœ:
--------------------------------------------------------------------------------

[+] 1å¤©é¢„æµ‹: å¼ºçƒˆ | å¼ºçƒˆå»ºè®®
  ä¿¡å·ä¸€è‡´æ€§: 2/2
  å¹³å‡ç½®ä¿¡åº¦: 78.9%
  MA20é¢„æµ‹: å¼ºåŠ¿(â‰¥MA20)
  å½¢æ€é¢„æµ‹: æœ‰ä¿¡å·

[+] 3å¤©é¢„æµ‹: æŽ¨è | å»ºè®®å…³æ³¨
  ä¿¡å·ä¸€è‡´æ€§: 2/2
  å¹³å‡ç½®ä¿¡åº¦: 75.2%
  MA20é¢„æµ‹: å¼ºåŠ¿(â‰¥MA20)
  å½¢æ€é¢„æµ‹: æœ‰ä¿¡å·

[*] 5å¤©é¢„æµ‹: è§‚æœ› | æš‚ä¸å»ºè®®
  ä¿¡å·ä¸€è‡´æ€§: 0/2
  å¹³å‡ç½®ä¿¡åº¦: 56.9%
  MA20é¢„æµ‹: å¼±åŠ¿(<MA20)
  å½¢æ€é¢„æµ‹: æ— ä¿¡å·

[OK] ç»¼åˆé¢„æµ‹å›¾è¡¨å·²ä¿å­˜: results/comprehensive_multi_horizon_600519.png
[OK] 600519 é¢„æµ‹å®Œæˆ
```

### 6.2 æ–¹æ³•Bï¼šä½¿ç”¨å·²è®­ç»ƒçš„æ¼”ç¤º

ç›´æŽ¥æŸ¥çœ‹æ­¥éª¤5ç”Ÿæˆçš„é¢„æµ‹ç»“æžœå’Œå›¾è¡¨ï¼š
```bash
# æŸ¥çœ‹ç”Ÿæˆçš„å›¾è¡¨
explorer results\
```

---

## ðŸ“ æ–‡ä»¶ç»“æž„è¯´æ˜Ž

```
up_down_stock_analyst/
â”œâ”€â”€ data/                          # æ•°æ®ç›®å½•
â”‚   â”œâ”€â”€ all_stock_data.pkl        # â­ æ‰€æœ‰è‚¡ç¥¨æ•°æ®ï¼ˆæ­¥éª¤2ç”Ÿæˆï¼‰
â”‚   â”œâ”€â”€ processed_features.pkl    # â­ å¤„ç†åŽç‰¹å¾ï¼ˆæ­¥éª¤3ç”Ÿæˆï¼‰
â”‚   â”œâ”€â”€ processed_targets.csv     # ç›®æ ‡å˜é‡
â”‚   â””â”€â”€ stock_*.csv               # å•ä¸ªè‚¡ç¥¨æ•°æ®
â”‚
â”œâ”€â”€ models/                        # æ¨¡åž‹ç›®å½•
â”‚   â”œâ”€â”€ multi_horizon_models.pkl  # â­ å¤šæ—¶é—´çª—å£æ¨¡åž‹ï¼ˆæ­¥éª¤5ç”Ÿæˆï¼‰
â”‚   â”œâ”€â”€ trained_model.pkl         # â­ MA20é¢„æµ‹æ¨¡åž‹ï¼ˆæ­¥éª¤4ç”Ÿæˆï¼‰
â”‚   â”œâ”€â”€ all_trained_models.pkl    # æ‰€æœ‰æ¨¡åž‹
â”‚   â”œâ”€â”€ feature_list.pkl          # ç‰¹å¾åˆ—è¡¨
â”‚   â””â”€â”€ model_info.pkl            # æ¨¡åž‹ä¿¡æ¯
â”‚
â”œâ”€â”€ results/                       # ç»“æžœç›®å½•
â”‚   â”œâ”€â”€ binary_classification_results.png        # MA20åˆ†ç±»ç»“æžœ
â”‚   â”œâ”€â”€ multi_horizon_prediction_*.png          # å¤šæ—¶é—´çª—å£é¢„æµ‹
â”‚   â””â”€â”€ comprehensive_multi_horizon_*.png       # ç»¼åˆé¢„æµ‹
â”‚
â”œâ”€â”€ utils/                         # å·¥å…·æ¨¡å—
â”‚   â”œâ”€â”€ technical_indicators.py   # æŠ€æœ¯æŒ‡æ ‡
â”‚   â”œâ”€â”€ pattern_recognition.py    # å½¢æ€è¯†åˆ«
â”‚   â””â”€â”€ matplotlib_config.py      # å­—ä½“é…ç½®
â”‚
â”œâ”€â”€ stock_data_downloader.py      # æ­¥éª¤2ï¼šæ•°æ®ä¸‹è½½
â”œâ”€â”€ stock_feature_engineering.py  # æ­¥éª¤3ï¼šç‰¹å¾å·¥ç¨‹
â”œâ”€â”€ stock_statistical_analysis.py # æ­¥éª¤4ï¼šMA20æ¨¡åž‹è®­ç»ƒ
â”œâ”€â”€ multi_horizon_prediction_system.py  # æ­¥éª¤5ï¼šå¤šæ—¶é—´çª—å£è®­ç»ƒâ­
â””â”€â”€ stock_multi_horizon_live_prediction.py  # æ­¥éª¤6ï¼šå®žç›˜é¢„æµ‹â­
```

---

## ðŸš€ å¿«é€Ÿå¼€å§‹ï¼ˆå®Œæ•´å‘½ä»¤ï¼‰

å¦‚æžœä½ æ˜¯ç¬¬ä¸€æ¬¡è¿è¡Œï¼ŒæŒ‰é¡ºåºæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```bash
# 1. å®‰è£…ä¾èµ–
pip install pandas numpy scipy scikit-learn xgboost lightgbm imbalanced-learn tsfresh matplotlib seaborn efinance akshare pywt

# 2. ä¸‹è½½è‚¡ç¥¨æ•°æ®
python stock_data_downloader.py

# 3. ç‰¹å¾å·¥ç¨‹ï¼ˆè€—æ—¶è¾ƒé•¿ï¼‰
python stock_feature_engineering.py

# 4. è®­ç»ƒMA20æ¨¡åž‹
python stock_statistical_analysis.py

# 5. è®­ç»ƒå¤šæ—¶é—´çª—å£æ¨¡åž‹ â­
python multi_horizon_prediction_system.py

# 6. å®žç›˜é¢„æµ‹
python stock_multi_horizon_live_prediction.py
```

---

## âš ï¸ å¸¸è§é—®é¢˜

### Q1: å¯ä»¥è·³è¿‡æŸäº›æ­¥éª¤å—ï¼Ÿ

**A:** ä¸å»ºè®®è·³è¿‡ã€‚æ¯ä¸ªæ­¥éª¤éƒ½ä¾èµ–å‰ä¸€æ­¥çš„è¾“å‡ºï¼š
- æ­¥éª¤3ä¾èµ–æ­¥éª¤2çš„ `all_stock_data.pkl`
- æ­¥éª¤4ä¾èµ–æ­¥éª¤3çš„ `processed_features.pkl`
- æ­¥éª¤5ä¾èµ–æ­¥éª¤2çš„ `all_stock_data.pkl`
- æ­¥éª¤6ä¾èµ–æ­¥éª¤4å’Œæ­¥éª¤5çš„æ¨¡åž‹

### Q2: å¦‚æžœä¸­é€”å‡ºé”™æ€Žä¹ˆåŠžï¼Ÿ

**A:** å¯ä»¥ä»Žå‡ºé”™çš„æ­¥éª¤é‡æ–°å¼€å§‹ï¼š
```bash
# ä¾‹å¦‚æ­¥éª¤3å‡ºé”™ï¼Œåªéœ€é‡æ–°è¿è¡Œæ­¥éª¤3
python stock_feature_engineering.py

# ç„¶åŽç»§ç»­åŽç»­æ­¥éª¤
python stock_statistical_analysis.py
python multi_horizon_prediction_system.py
```

### Q3: æ•°æ®éœ€è¦æ›´æ–°å—ï¼Ÿ

**A:** å»ºè®®å®šæœŸæ›´æ–°ï¼š
```bash
# æ¯å‘¨æˆ–æ¯æœˆé‡æ–°è¿è¡Œæ­¥éª¤2
python stock_data_downloader.py

# ç„¶åŽé‡æ–°è®­ç»ƒï¼ˆæ­¥éª¤3-5ï¼‰
python stock_feature_engineering.py
python stock_statistical_analysis.py
python multi_horizon_prediction_system.py
```

### Q4: å¦‚ä½•åªé¢„æµ‹æ–°è‚¡ç¥¨ï¼Ÿ

**A:** ç›´æŽ¥è¿è¡Œæ­¥éª¤6ï¼Œè¾“å…¥æ–°è‚¡ç¥¨ä»£ç ï¼š
```bash
python stock_multi_horizon_live_prediction.py
# è¾“å…¥: 600519,000001,002415
```

ç³»ç»Ÿä¼šå®žæ—¶ä¸‹è½½æ•°æ®å¹¶é¢„æµ‹ã€‚

### Q5: å›¾è¡¨ä¸­æ–‡ä¹±ç æ€Žä¹ˆåŠžï¼Ÿ

**A:** å·²è‡ªåŠ¨é…ç½®ä¸­æ–‡å­—ä½“ã€‚å¦‚æžœä»æœ‰é—®é¢˜ï¼š
```bash
# æµ‹è¯•ä¸­æ–‡æ˜¾ç¤º
python test_chinese_display.py

# æŸ¥çœ‹ç”Ÿæˆçš„æµ‹è¯•å›¾è¡¨
explorer results\chinese_display_test.png
```

---

## ðŸ“Š æ€§èƒ½åŸºå‡†

| æ­¥éª¤ | æ•°æ®é‡ | é¢„è®¡è€—æ—¶ | CPUä½¿ç”¨ | å†…å­˜ä½¿ç”¨ |
|-----|-------|---------|---------|---------|
| æ­¥éª¤2 | 30åªè‚¡ç¥¨ | 5-10åˆ†é’Ÿ | ä¸­ç­‰ | ~500MB |
| æ­¥éª¤3 | 30åªè‚¡ç¥¨ | 15-30åˆ†é’Ÿ | é«˜ | ~2GB |
| æ­¥éª¤4 | - | 3-5åˆ†é’Ÿ | é«˜ | ~1GB |
| æ­¥éª¤5 | - | 10-20åˆ†é’Ÿ | é«˜ | ~2GB |
| æ­¥éª¤6 | å•åªè‚¡ç¥¨ | <1åˆ†é’Ÿ | ä½Ž | ~500MB |

---

## ðŸ’¡ ä½¿ç”¨æŠ€å·§

### æŠ€å·§1: æ‰¹é‡é¢„æµ‹

åˆ›å»ºè‚¡ç¥¨åˆ—è¡¨æ–‡ä»¶ `predict_list.txt`:
```
600519
000001
002415
600036
```

ä¿®æ”¹æ­¥éª¤6çš„è„šæœ¬è¯»å–æ–‡ä»¶ã€‚

### æŠ€å·§2: è‡ªåŠ¨åŒ–è¿è¡Œ

åˆ›å»ºæ‰¹å¤„ç†è„šæœ¬ `run_all.bat` (Windows):
```batch
@echo off
echo å¼€å§‹å®Œæ•´æµç¨‹...
python stock_data_downloader.py
python stock_feature_engineering.py
python stock_statistical_analysis.py
python multi_horizon_prediction_system.py
echo å®Œæˆï¼
pause
```

æˆ– shellè„šæœ¬ `run_all.sh` (Linux/Mac):
```bash
#!/bin/bash
echo "å¼€å§‹å®Œæ•´æµç¨‹..."
python stock_data_downloader.py
python stock_feature_engineering.py
python stock_statistical_analysis.py
python multi_horizon_prediction_system.py
echo "å®Œæˆï¼"
```

### æŠ€å·§3: å®šæ—¶ä»»åŠ¡

Windowsä»»åŠ¡è®¡åˆ’ç¨‹åºï¼š
```
ä»»åŠ¡è®¡åˆ’ç¨‹åº â†’ åˆ›å»ºåŸºæœ¬ä»»åŠ¡ â†’ æ¯å‘¨è¿è¡Œ â†’ å¯åŠ¨ç¨‹åº: run_all.bat
```

Linux crontab:
```bash
# æ¯å‘¨æ—¥å‡Œæ™¨2ç‚¹è¿è¡Œ
0 2 * * 0 /path/to/run_all.sh
```

---

## ðŸ“š æ›´å¤šæ–‡æ¡£

- `MULTI_HORIZON_VERIFICATION_GUIDE.md` - å¤šæ—¶é—´çª—å£éªŒè¯è¯¦ç»†æŒ‡å—
- `TIME_ALIGNMENT_EXPLANATION.md` - æ—¶é—´å¯¹é½æŠ€æœ¯è¯´æ˜Ž
- `PATTERN_FEATURES_GUIDE.md` - å½¢æ€ç‰¹å¾è¯¦ç»†è¯´æ˜Ž
- `STOCK_FILTER_CONFIG.md` - è‚¡ç¥¨è¿‡æ»¤é…ç½®è¯´æ˜Ž

---

## ðŸŽ“ æ€»ç»“

**æ ¸å¿ƒæµç¨‹ï¼š**
1. âœ… ä¸‹è½½æ•°æ® â†’ 2. âœ… ç‰¹å¾å·¥ç¨‹ â†’ 3. âœ… è®­ç»ƒMA20æ¨¡åž‹ â†’ 4. â­ è®­ç»ƒå¤šæ—¶é—´çª—å£æ¨¡åž‹ â†’ 5. â­ å®žç›˜é¢„æµ‹

**å…³é”®æ–‡ä»¶ï¼š**
- `data/all_stock_data.pkl` - åŽŸå§‹æ•°æ®
- `data/processed_features.pkl` - å¤„ç†åŽç‰¹å¾
- `models/multi_horizon_models.pkl` - å¤šæ—¶é—´çª—å£æ¨¡åž‹ï¼ˆæœ€é‡è¦ï¼‰
- `models/trained_model.pkl` - MA20æ¨¡åž‹

**æœ€é‡è¦çš„å‘½ä»¤ï¼š**
```bash
python multi_horizon_prediction_system.py  # è®­ç»ƒå¤šæ—¶é—´çª—å£æ¨¡åž‹
python stock_multi_horizon_live_prediction.py  # å®žç›˜é¢„æµ‹
```

---

**ç‰ˆæœ¬ï¼š** V1.0  
**æ›´æ–°æ—¥æœŸï¼š** 2025-10-05  
**ä½œè€…ï¼š** AIè‚¡ç¥¨åˆ†æžç³»ç»Ÿ
